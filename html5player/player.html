<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width,user-scalable=yes">
<meta name="format-detection" content="telephone=no" />
<title id="title">无标题文档</title>
<style type="text/css">
	body{ overflow:hidden;}
	.l {float: left;}
	.r {float: right;}
	.playerPop *,body{padding:0;margin:0;}
	.playerPop li{list-style: none;}
	.playerPop{width: 100%; height: 100%; position: absolute; z-index: 100; left: 0px; top:0;}
	.playerPop .inset{width: 100%; height: 100%;position: relative; top:0px ; left: 0px; box-sizing:border-box;}
	.playerPop .playerTit{ line-height: 25px;  color:#dedede; padding-left: 9px; font-size: 0; line-height: 0 }
	.playerPop .playerTit span{display: inline-block;height:25px;font:400 12px/24px "Microsoft Yahei"; vertical-align: top;}
	.playerPop .playerTit .txt{max-width: 520px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;word-break:normal;word-wrap:normal;}
	.playerPop .playerTit .look{margin-left: 20px; color:#989898;}
	.playerPop .playerTit .look::before{content: ""; display: inline-block; vertical-align: middle; background: url(images/playerIcons.png) -80px -151px no-repeat; width: 14px; height: 10px; margin-right: 4px}
	.playerPop .close{position: absolute; right: 7px; top:7px;background: url(images/playerIcons.png) 0px -150px no-repeat; cursor: pointer; width: 12px;height: 12px;z-index: 5;}
	.playerPop .close:hover{background-position: -30px -150px;}
	.playerPop .close.dis{opacity:0.15; cursor: default; }
	.playerPop .close.dis:hover{background-position: 0 -150px;}
	.playerPop .playerbody{width: 100%; height: 100%;}
	.playerPop .sidebar{position: absolute; top: 162px; right: 4px; z-index: 10;}
	.playerPop .good,.playerPop .share{width: 42px; height: 42px; margin-bottom: 3px; position: relative;line-height: 42px; text-align: center; cursor: pointer;}
	.playerPop .good > span ,.playerPop .share > span{display: inline-block; background: url(images/playerIcons.png) 0 -220px no-repeat;vertical-align: middle; width: 100%; height: 100%;cursor: pointer; }
	.playerPop .good{}
	.playerPop .good > span:hover{background-position: -50px -220px}
	.playerPop .share > span{background-position: 0 -170px}
	.playerPop .share > span:hover{background-position: -50px -170px}
	.playerPop .share ul{top: 43px;right: 0; position: absolute; width: 100%;display: none;}
	.playerPop .share li{margin-bottom: 1px; width: 100%; height: 42px; position: relative; background-color: rgba(0,0,0,0.6)}
	.playerPop .share li >b{border-radius: 100px; display: inline-block;background: url(images/playerIcons.png) 0 0 no-repeat;vertical-align: middle; width: 23px; height: 23px; }
	.playerPop .share .wx b{background-position: 0 0;}
	.playerPop .share .wx:hover b{background-position: -50px 0;}
	.playerPop .share .wb b{background-position: 0 -30px;}
	.playerPop .share .wb:hover b{background-position: -50px -30px;}
	.playerPop .share .qq b{background-position: 0 -60px;}
	.playerPop .share .qq:hover b{background-position: -50px -60px;}
	.playerPop .share .qz b{background-position: 0 -90px;}
	.playerPop .share .qz:hover b{background-position: -50px -90px;}
	.playerPop .share .top{height: 22px; line-height: 22px;}
	.playerPop .share .top b{ background-position: 0 -120px; border-radius: 0; width: 15px;height: 8px; opacity: 0.65}
	.playerPop .share .top:hover b{opacity: 1;}
	.playerPop .share .wx .qr{position: absolute; right: 44px; top:0;background: #FFF; width: 126px; height: 126px;padding-top: 5px;box-sizing:border-box;display: none; }
	.playerPop .share .wx .qr img{vertical-align: top; width: 116px; height: 116px;}
	.playerPop .share .show{display: block !important;}
	.playerPop .share .hide{display: none !important;}
	/*.playerPop .good::before{content: ""; position: absolute; left: 0; top:0; right:0;bottom:0;background: rgba(0,255,180,0.6)}
	.playerPop .good:hover::before{background: rgba(0,255,180,0.75)}
	.playerPop .good span{opacity: 0.9; width: 24px; height: 24px;}
	.playerPop .share{}
	.playerPop .share::before{content: ""; position: absolute; left: 0; top:0; right:0;bottom:0;background: rgba(11,212,255,0.6)}
	.playerPop .share:hover::before{background: rgba(11,212,255,0.75)}
	.playerPop .share span{opacity: 0.9; width: 24px; height: 24px;}*/
	.player-control {
		height: 25px;
		width: 100%;
		position: absolute;
		z-index: 101;
		bottom: 0;
		background-color: #2A2A2A;
		font-size: 12px;
		color: #ffffff;
	}
	.play-btn {
		width: 55px;
		position: absolute;
		left: 0px;
		height: 100%;
	}
	.play-process {
		margin-left: 55px;
		margin-right: 200px;
		height: 100%;
		position: relative;
	}
	.play-process-all {
	    height: 2px;
	    background-color: #737373;
	    position: relative;
	    top: 11px;
	    left: 0px;
	}
	.play-process-drag {
		position: absolute;
	    width: 9px;
	    height: 2px;
	    border-radius: 1.5px;
	    background-color: #478CDF;
	    top: 11px;
	    left: 0px;
	}
	.play-process-btn {
		display: block;
	    position: absolute;
	    width: 9px;
	    height: 6px;
	    border-radius: 1.8px;
	    background-color: #ffffff;
	    top: 9px;
	    left: 0px;
	}
	.play-msg {
		position: absolute;
		right: 0px;
		top: 0px;
		width: 200px;
		height: 100%;
	}
	.play-time {
	    position: absolute;
	    top: 0px;
	    left: 0px;
	    width: 90px;
	    text-align: center;
	    height: 25px;
	    line-height: 24px;
	}
	.play-sound {
		display: block;
		height: 100%;
		position: relative;
		margin-left: 90px;
	}
	.play-sound-switch {
		width: 20px;
	    height: 25px;
	    float: left;
	}
	.play-sound-wrapper {
	    height: 25px;
	    width: 60px;
	    float: left;
	    position: relative;
	}
	.play-sound-all {
		height: 2px;
	    background-color: #737373;
	    margin-top: 0px;
	    position: relative;
	    top: 11px;
	}
	.play-sound-drag {
		position: absolute;
	    width: 9px;
	    height: 2px;
	    border-radius: 1.5px;
	    background-color: #478CDF;
	    top: 11px;
	    left: 0px;
	}
	.play-sound-btn {
		display: block;
	    position: absolute;
	    width: 9px;
	    height: 6px;
	    border-radius: 1.8px;
	    background-color: #ffffff;
	    top: 9px;
	    left: 0px;
	}
	.play-screen {
		position: absolute;
		top: 0px;
		right: 0px;
		width: 30px;
		height: 25px;
	}
	.play-start{
	    display: inline-block;
	    width: 9px;
	    height: 11px;
	    background: url(./images/icon.png) no-repeat 0px -22px;
	    margin-left: 13px;
	    margin-top: 7px;
	}
	.play-pause {
		display: inline-block;
	    width: 9px;
	    height: 11px;
	    background: url(./images/icon.png) no-repeat 0px -10px;
	    margin-left: 13px;
	    margin-top: 7px;
	}
	.play-btn-wrapper {
		width: 100%;
		height: 25px;
	}
	.play-stop {
		display: inline-block;
	    width: 9px;
	    height: 10px;
	    background: url(./images/icon.png) no-repeat 0px 0px;
	    margin-left: 6px;
	    margin-top: 8px;
	}
	.play-sound-on {
		display: inline-block;
	    width: 9px;
	    height: 10px;
	    background: url(./images/icon.png) no-repeat 0px -34px;
	    margin-top: 6px;
		margin-left: 2px;
	}
	.play-sound-off {
	    display: inline-block;
	    width: 11px;
	    height: 9px;
	    background: url(./images/icon.png) no-repeat 0px -47px;
	    margin-top: 7px;
    	margin-left: 2px;
	}
	.play-screen-not-full {
		display: inline-block;
	    width: 11px;
	    height: 11px;
	    background: url(./images/icon.png) no-repeat 0px -57px;
	    margin-top: 5px;
		margin-left: 10px;
	}
	.play-screen-full {
		display: inline-block;
	    width: 11px;
	    height: 11px;
	    background: url(./images/icon.png) no-repeat 0px -69px;
	    margin-top: 5px;
		margin-left: 10px;
	}
	.play-sym {
		width: 90px;
		position: absolute;
		z-index: 10000;
		left: 50%;
		top: 50%;
		margin-left: -45px;
		margin-top: -45px;
		cursor: pointer;
	}
	.btn-wrapper {
		width: 50%;
		height: 100%;
		float: left;
	}
</style>

</head>

<body>
<div class="playerPop">
	<img class="play-sym" src="./images/play.png">
	<div class="inset">
		<div class="playerbody" id="video">
        	<video id="videoSource"  style="width:100%; height: calc(100% - 25px);" src="111.mp4"poster="images/qr.png" ></video>
        		
				<div class="player-control">
					<div class="play-btn ">
						<div class="play-btn-wrapper">
							<div class="btn-wrapper btn-wrapper-start">
								<span id="play-start" class="play-start"></span>
							</div>
							<div class="btn-wrapper btn-wrapper-stop">
								<span class="play-stop"></span>
							</div>
						</div>
					</div>
					<div class="play-process">
						<div class="play-process-all"></div>
						<div class="play-process-drag"></div>
						<div class="play-process-before"></div>
						<span class="play-process-btn"></span>
					</div>
					<div class="play-msg ">
						<span class="play-time">
							<span class="play-current-time">00:00</span>/<span class="play-all-time"></span>
						</span>
						<span class="play-sound">
							<div class="play-sound-switch">
								<span id="sound-switch" class="play-sound-on"></span>	
							</div>
							<div class="play-sound-wrapper">
								<div class="play-sound-all"></div>
								<div class="play-sound-drag"></div>
								<span class="play-sound-btn"></span>
							</div>
						</span>
						<span class="play-screen">
							<span id="screen-full-swtich" class="play-screen-not-full"></span>
						</span>
					</div>
				</div>
    	</div>
		<div class="sidebar">
			<!-- <div class="good"><span></span></div> -->
			<div class="share"><span id="videoshare"></span>
				<ul>

					<li class="wx"><b></b><div class="qr"><img src="images/qr.png" alt=""></div></li>
					<li class="wb"><b></b></li>
					<li class="qq"><b></b></li>
					<li class="qz"><b></b></li>
					<li class="top"><b></b></li>

				</ul>
			</div>
		</div>

	</div>
</div>

<script src="./jquery.min.js"></script>
<script>
	var videoshare = document.querySelector(".sidebar .share");
	var showShareList = document.getElementById("videoshare");
	var shareList = videoshare.querySelector("ul");
	var hideShareList = videoshare.querySelector(".top");
	var wxshare = videoshare.querySelector(".wx");
	var wxqr = videoshare.querySelector(".qr");

	showShareList.addEventListener("click",function(){
		//shareList.classList.remove("hide")
		shareList.classList.add("show")
	},false)
	hideShareList.addEventListener("click",function(){
		//shareList.classList.add("hide")
		shareList.classList.remove("show")
	},false)
	wxshare.addEventListener("click",function(){
		var classlist = wxqr.classList;
		if(!classlist.contains("show")){
			classlist.add("show");
		}else{
			classlist.remove("show");
		}
	},false)
</script>
<script>
	function videoPlayer() {
		$(window).resize(function() {
			processWidth = $('.play-process').width()
		})
		var videoSource = document.getElementById('videoSource'),
			timer,
			duration = videoSource.duration || 0,
			currentTime, 
			isPlay = false, //是否开始播放
			isDrag = false, //是否拖拽进度条
			isSound = false, //是否拖拽音量区域
			isSoundOn = true, //是否开启声音
			isFullScreen = false,
			currentProcess,
			dragProcessEl = $('.play-process-drag'),
			dragTarget = $('.play-process-btn'),
			soundTarget = $('.play-sound-btn'), //音量高低条按钮
			soundProcess = $('.play-sound-drag'), //音量高低条
			dragTarget = $('.play-process-btn'), //播放进度条按钮
			dragProcess = $('.play-process-drag'), //播放进度条,
			playStartBtn = $('.btn-wrapper-start'), //播放按钮
			soundSwitchBtn = $('#sound-switch'), //音频开关
			playStopBtn = $('.btn-wrapper-stop'), //停止按钮
			fullScreenBtn = $('#screen-full-swtich'),//全屏开关
			processWidth = $('.play-process').width(),
			playSym = $('.play-sym ')

		var dragControl = function() { //拖动元素、进度条元素、拖动总长
			var startX = 0,
				moveX = 0,
				disX = 0,
				dragDis = 0,
				soundDis = 0,
				leftInit = 55 //进度条整体距离左侧偏移
				rightInit = 30 //音量条整体距离右侧偏移
				dragProcessWidth = dragProcess.width(), //播放进度条当前长度
				soundMaxLength = $('.play-sound').width(), //音量高低条总长
				soundProcessWidth = soundProcess.width() //音量高低条当前长度

			$('.play-all-time').html(changeSecond(duration))
			$('body').mousedown(function(e) {
				startX = e.clientX
				if($(e.target).hasClass('play-process') || $(e.target).parent().hasClass('play-process')) {
					isDrag = true
					isPlay = false
					dragDis = startX - leftInit
					dragTarget.css({
						left: dragDis
					})
					dragProcess.css({
						width: dragDis
					})
					playStartBtn.find('span').removeClass('play-start').addClass('play-pause')
					videoSource.pause()
					playSym.hide()
					clearTimeout(timer)
				}
				if($(e.target).hasClass('play-sound-wrapper') || $(e.target).parent().hasClass('play-sound-wrapper')) {
					isSound = true
					isSoundOn = true
					var clientWidth = $('body').width()
					soundDis = 110 - (clientWidth - startX) - 20 // 110为进度条右侧总长，20为播放按钮占用长度
					soundProcess.css({
						width: soundDis
					})
					soundTarget.css({
						left: soundDis
					})
					soundSwitchBtn.removeClass('play-sound-off').addClass('play-sound-on')
					videoSource.volume = soundDis / soundMaxLength
				}
			}).mousemove(function(e) {
				moveX = e.clientX
					disX = moveX - startX
				if(isDrag) {
					if($(e.target).hasClass('play-process') || $(e.target).parent().hasClass('play-process')) {
						var left = dragDis + disX
						if(left > processWidth - 9) { //9为拖拽条小图标的宽度
							left = processWidth - 9
						} else if(left < 0) {
							left = 0
						}
						dragTarget.css({
							left: left
						})
						dragProcess.css({
							width: left
						})
					}
				}
				if(isSound) {
					if($(e.target).hasClass('play-sound-wrapper') || $(e.target).parent().hasClass('play-sound-wrapper')) {
						var left = soundDis + disX
						console.log(soundDis, disX)
						if(left > soundMaxLength) {
							left = soundMaxLength
						} else if(left < 0) {
							left = 0
						}
						soundTarget.css({
							left: left
						})
						soundProcess.css({
							width: soundProcessWidth + left
						})
						videoSource.volume = left / soundMaxLength
					}
				}
			}).mouseup(function(e) {
				if($(e.target).hasClass('play-process') || $(e.target).parent().hasClass('play-process')) {
					isDrag = false
					isPlay = true
					videoSource.play()
					videoSource.currentTime = $('.play-process-drag').width() / processWidth * duration
					drawProcess()
				}
				if($(e.target).hasClass('play-sound-wrapper') || $(e.target).parent().hasClass('play-sound-wrapper')) {
					isSound = false
				}
			})
		}
		var drawProcess = function(newCurentTime) {
			if(!isDrag) {
				currentTime = videoSource.currentTime
				$('.play-current-time').html(changeSecond(currentTime))
				currentProcess = currentTime / duration * (processWidth - 9)//9为拖拽条小图标的宽度
				dragProcessEl.css({
					width: currentProcess
				})
				dragTarget.css({
					left: currentProcess
				})
				if(currentTime < duration) {
					timer = setTimeout(drawProcess, 10)
				} else {
					clearTimeout(timer)
				}
			}
		}
		var changeSecond = function(value) {
			var sec = parseInt(value)// 秒 
			var min = 0// 分 
			var hour = 0// 小时 
			if(sec > 60) { 
			min = parseInt(sec/60) 
			sec = parseInt(sec%60) 
			if(min > 60) { 
			hour = parseInt(min/60) 
			min = parseInt(min%60) 
			} 
			} 
			var result = parseInt(sec)
			if(min === 0) {
				if(result < 10) {
					result =  "00:0" + result
				} else {
					result =  "00:" + result
				}
				

			}
			if(min > 0) { 
			result = ""+parseInt(min)+":"+result 
			} 
			if(hour > 0) { 
			result = ""+parseInt(hour)+":"+result 
			} 
			return result 
		}
		playStartBtn.click(function() {
			if(isPlay) {
				videoSource.pause()
				playSym.show()
				$(this).find('span').removeClass('play-pause').addClass('play-start')
				isPlay = false
			} else {
				videoSource.play()
				playSym.hide()
				$(this).find('span').removeClass('play-start').addClass('play-pause')
				isPlay = true
				drawProcess()
			}
			
		})
		soundSwitchBtn.click(function() {
			if(isSoundOn) {
				$(this).removeClass('play-sound-on').addClass('play-sound-off')
				isSoundOn = false
				videoSource.volume = 0
				$('.play-sound-btn').css({left: 0})
				$('.play-sound-drag').width(0)
			} else {
				$(this).removeClass('play-sound-off').addClass('play-sound-on')
				isSoundOn = true
			}
		})
		playStopBtn.click(function() {
			videoSource.currentTime = 0
			videoSource.pause()
			playSym.show()
			dragTarget.css({left: 0})
			dragProcess.width(0)
			isPlay = false
			playStartBtn.find('span').removeClass('play-pause').addClass('play-start')
		})
		fullScreenBtn.click(function() {
			if(isFullScreen) {
				isFullScreen = false
				$(this).removeClass('play-screen-full').addClass('play-screen-not-full')
				if (document.exitFullscreen) {  
				    document.exitFullscreen();  
				}  
				else if (document.mozCancelFullScreen) {  
				    document.mozCancelFullScreen();  
				}  
				else if (document.webkitCancelFullScreen) {  
				    document.webkitCancelFullScreen();  
				}
				else if (document.msExitFullscreen) {
				      document.msExitFullscreen();
				}
			} else {
				isFullScreen = true
				$(this).removeClass('play-screen-not-full').addClass('play-screen-full')
				var docElm = document.documentElement;
				//W3C  
				if (docElm.requestFullscreen) {  
				    docElm.requestFullscreen();  
				}
				//FireFox  
				else if (docElm.mozRequestFullScreen) {  
				    docElm.mozRequestFullScreen();  
				}
				//Chrome等  
				else if (docElm.webkitRequestFullScreen) {  
				    docElm.webkitRequestFullScreen();  
				}
				//IE11
				else if (elem.msRequestFullscreen) {
				  elem.msRequestFullscreen();
				}
			}
			
		})
		var i = 0
		console.log("reapt", i)
		$('#videoSource, .play-sym').click(function() {
			if(isPlay) {
				isPlay = false
				videoSource.pause()
				playSym.show()
				playStartBtn.find('span').removeClass('play-pause').addClass('play-start')
				clearTimeout(timer)
			} else {
				isPlay = true
				videoSource.play()
				playSym.hide()
				drawProcess()
				playStartBtn.find('span').removeClass('play-start').addClass('play-pause')
			}
		})
		dragControl() 
		videoSource.oncanplay =null;
	}
	videoSource.oncanplay = videoPlayer
</script>
</body>
</html>
